<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Salon krasu ‚Äî –æ–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å</title>
  <style>
    /* ===== –ë–ê–ó–ê ===== */
    :root{
      --bg:#0b0b12;
      --text:#f6f7fb;
      --muted:#cfd3df;
      --glass:rgba(255,255,255,.10);
      --border:rgba(255,255,255,.18);
      --accent1:#7c3aed;   /* —Ñ–∏–æ–ª–µ—Ç */
      --accent2:#ff5fa2;   /* —Ä–æ–∑–æ–≤—ã–π */
      --radius:22px;
      --shadow:0 10px 28px rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Arial, Helvetica, sans-serif;
      font-weight: 700; /* –∂–∏—Ä–Ω—ã–π –≤–µ–∑–¥–µ */
      color:var(--text);
      background: var(--bg);
      overflow:hidden;
    }
    /* –§–æ–Ω + –ª—ë–≥–∫–∞—è —Ä–∞–∑–º—ã—Ç–æ—Å—Ç—å */
    body::before{
      content:""; position:fixed; inset:0; z-index:-2;
      background:
        linear-gradient( to bottom right, rgba(12,11,20,.6), rgba(15,10,24,.75) ),
        url("https://idei.club/uploads/posts/2022-10/1666966713_4-idei-club-p-saloni-krasoti-v-yevrope-interer-vkontakte-4.jpg")
        center/cover no-repeat;
      filter: blur(3px);
      transform: scale(1.03);
    }
    /* –õ—ë–≥–∫–∞—è —Å–µ—Ç–æ—á–∫–∞ —Å–≤–µ—Ä—Ö—É */
    body::after{
      content:""; position:fixed; inset:0; z-index:-1; pointer-events:none;
      background-image: radial-gradient(rgba(255,255,255,.07) 1px, transparent 1px);
      background-size:3px 3px; mix-blend-mode: overlay; opacity:.35;
    }

    /* ===== –ü–†–ï–õ–û–ê–î–ï–† ===== */
    #loader{
      position:fixed; inset:0; display:grid; place-items:center; z-index:999;
      background:linear-gradient(135deg,rgba(8,8,14,.9),rgba(12,10,18,.9));
      transition:opacity .4s ease, visibility .4s ease;
    }
    #loader.hide{opacity:0; visibility:hidden}
    .ring{
      width:86px; height:86px; border-radius:50%;
      background:
        conic-gradient(from 0deg, var(--accent1), var(--accent2), var(--accent1));
      -webkit-mask: radial-gradient(circle 34px, transparent 31px, #000 32px);
              mask: radial-gradient(circle 34px, transparent 31px, #000 32px);
      animation: spin 1.2s linear infinite;
      filter: drop-shadow(0 8px 22px rgba(124,58,237,.45));
    }
    @keyframes spin{to{transform:rotate(1turn)}}

    /* ===== –ë–†–ï–ù–î ===== */
    .brand{
      position:fixed; top:14px; left:16px; z-index:10;
      padding:8px 12px; border-radius:12px;
      background:rgba(10,10,18,.55);
      border:1px solid var(--border);
      backdrop-filter: blur(6px);
      box-shadow:0 6px 18px rgba(0,0,0,.25);
      color:#fff; letter-spacing:.3px;
    }
    .brand b{font-weight:900}

    /* ===== –ö–ê–†–¢–û–ß–ö–ê –ó–ê–ü–ò–°–ò ===== */
    .wrap{height:100%; display:grid; place-items:center; padding:22px}
    .card{
      width:min(940px, 96vw);
      background:var(--glass);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      backdrop-filter: blur(14px) saturate(130%);
      padding:26px;
    }
    h1{
      margin:0 0 18px;
      font-size:36px; line-height:1.15;
      letter-spacing:.2px;
      display:flex; align-items:center; gap:10px;
    }
    h1 .chip{
      padding:3px 9px; border-radius:999px; font-size:14px;
      background:linear-gradient(135deg,var(--accent1),var(--accent2)); color:#fff;
    }

    /* –°–µ—Ç–∫–∞ —Ñ–æ—Ä–º—ã */
    .form{display:grid; grid-template-columns:1fr 1fr; gap:16px}
    .form .wide{grid-column:1/-1}

    label{margin-bottom:6px; display:block; color:#fff}

    /* –ü–æ–ª—è. –î–µ–ª–∞–µ–º –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö */
    input, select{
      width:100%;
      font-family: Arial, Helvetica, sans-serif;
      font-weight: 700;         /* –∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ –≤ –∏–Ω–ø—É—Ç–∞—Ö */
      font-size:16px;
      color:#101114;            /* –ß–Å–†–ù–´–ô —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ –ø–æ–ª–µ–π –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ */
      background:#ffffff;       /* –°–í–ï–¢–õ–´–ô —Ñ–æ–Ω ‚Äî –≤—ã–ø–∞–¥–∞–π–∫–∞ –Ω–µ —Å–æ–ª—å—ë—Ç—Å—è */
      border:1px solid #d7d9e2; border-radius:14px;
      padding:13px 14px; outline:none;
      transition: box-shadow .15s ease, border-color .15s ease, transform .02s ease;
      box-shadow: inset 0 1px 0 rgba(0,0,0,.04);
      appearance: none;         /* –µ–¥–∏–Ω—ã–π –≤–∏–¥ */
    }
    input:focus, select:focus{
      border-color:#b7b9c6; box-shadow:0 0 0 3px rgba(124,58,237,.25);
    }
    input::placeholder{color:#7a7e8e; font-weight:700} /* –∂–∏—Ä–Ω—ã–π –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä */

    /* –°—Ç—Ä–µ–ª–æ—á–∫–∞ —É select */
    .select-wrap{position:relative}
    .select-wrap::after{
      content:"‚ñæ"; position:absolute; right:12px; top:50%; translate:0 -50%;
      color:#444; pointer-events:none; font-size:16px;
    }
    /* –¶–≤–µ—Ç –æ–ø—Ü–∏–π –≤ —Ä–∞—Å–∫—Ä—ã—Ç–æ–º —Å–ø–∏—Å–∫–µ */
    option{color:#111; background:#fff; font-weight:700}

    /* –°–µ—Ä–≤–∏—Å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥ select —É—Å–ª—É–≥–∏ */
    .info{margin-top:6px; color:#fff; font-size:14px}

    /* –î–∞—Ç–∞/–≤—Ä–µ–º—è –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ */
    .grid-2{display:grid; grid-template-columns:1fr 1fr; gap:16px}

    /* –ö–Ω–æ–ø–∫–∞ */
    .btn{
      display:inline-grid; place-items:center;
      width:100%; padding:14px 16px;
      border-radius:14px; border:1px solid transparent;
      background:linear-gradient(135deg,var(--accent1),var(--accent2));
      color:#fff; font-size:16px; letter-spacing:.2px; cursor:pointer;
      box-shadow:0 8px 24px rgba(124,58,237,.35);
      transition: transform .06s ease, filter .2s ease;
    }
    .btn:active{transform:translateY(1px)}
    .btn:hover{filter:brightness(1.05)}

    /* –¢–æ—Å—Ç */
    .toast{
      position:fixed; right:18px; bottom:18px; z-index:50;
      background:rgba(20,20,28,.92); color:#fff;
      border:1px solid var(--border); border-radius:14px;
      padding:12px 14px; box-shadow:var(--shadow);
      opacity:0; translate:0 14px; transition:all .25s ease;
    }
    .toast.show{opacity:1; translate:0 0}

    /* –ê–¥–∞–ø—Ç–∏–≤ */
    @media (max-width:760px){
      h1{font-size:28px}
      .form{grid-template-columns:1fr}
      .grid-2{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <!-- –ü—Ä–µ–ª–æ–∞–¥–µ—Ä -->
  <div id="loader"><div class="ring" aria-label="loading"></div></div>

  <!-- –ë—Ä–µ–Ω–¥ —Å–ª–µ–≤–∞ –≤ —É–≥–ª—É -->
  <div class="brand"><b>Salon krasu</b> (–≤–∞—à–∞ –Ω–∞–∑–≤–∞)</div>

  <main class="wrap">
    <section class="card">
      <h1>–û–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å <span class="chip">–¥–µ–º–æ</span></h1>

      <form id="bookForm" class="form" autocomplete="off">
        <div class="field wide">
          <label for="name">–Ü–º'—è</label>
          <input id="name" type="text" placeholder="–í–∞—à–µ —ñ–º'—è" required>
        </div>

        <div class="field wide">
          <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω (–º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç)</label>
          <input id="phone" type="tel" inputmode="tel" placeholder="+380..." required>
        </div>

        <div class="field">
          <label for="service">–ü–æ—Å–ª—É–≥–∞</label>
          <div class="select-wrap">
            <select id="service" required></select>
          </div>
          <div id="serviceInfo" class="info"></div>
        </div>

        <div class="field">
          <label for="master">–ú–∞–π—Å—Ç–µ—Ä</label>
          <div class="select-wrap">
            <select id="master" required>
              <option value="anna">–ê–Ω–Ω–∞ ‚Äî –º–∞–Ω—ñ–∫—é—Ä/–±—Ä–æ–≤–∏</option>
              <option value="olena">–û–ª–µ–Ω–∞ ‚Äî —Å—Ç—Ä–∏–∂–∫–∏/–¥–æ–≥–ª—è–¥</option>
            </select>
          </div>
        </div>

        <div class="grid-2 wide">
          <div class="field">
            <label for="date">–î–∞—Ç–∞</label>
            <input id="date" type="date" required>
          </div>
          <div class="field">
            <label for="time">–ß–∞—Å</label>
            <div class="select-wrap">
              <select id="time" required></select>
            </div>
          </div>
        </div>

        <div class="wide">
          <button class="btn" type="submit">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–∞–ø–∏—Å</button>
        </div>
      </form>
      <div id="summary" class="info" style="margin-top:10px"></div>
    </section>
  </main>

  <div id="toast" class="toast">–ì–æ—Ç–æ–≤–æ!</div>

  <script>
    /* ===== –î–ê–ù–Ü ===== */
    const SERVICES = [
      {id:"mani",   name:"–ú–∞–Ω—ñ–∫—é—Ä –∫–ª–∞—Å–∏—á–Ω–∏–π üíÖ",  duration_min:60, price:500},
      {id:"gel",    name:"–ü–æ–∫—Ä–∏—Ç—Ç—è –≥–µ–ª—å-–ª–∞–∫–æ–º üíñ",duration_min:75, price:700},
      {id:"brows",  name:"–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –±—Ä—ñ–≤ üëÅÔ∏è",  duration_min:45, price:450},
      {id:"hair",   name:"–°—Ç—Ä–∏–∂–∫–∞ / —É–∫–ª–∞–¥–∫–∞ üíá‚Äç‚ôÄÔ∏è", duration_min:60, price:650},
      {id:"facial", name:"–î–æ–≥–ª—è–¥ –∑–∞ –æ–±–ª–∏—á—á—è–º ‚ú®", duration_min:75, price:900},
    ];
    const MASTERS = { anna:"–ê–Ω–Ω–∞ ‚Äî –º–∞–Ω—ñ–∫—é—Ä/–±—Ä–æ–≤–∏", olena:"–û–ª–µ–Ω–∞ ‚Äî —Å—Ç—Ä–∏–∂–∫–∏/–¥–æ–≥–ª—è–¥" };
    const TIME_SLOTS = ["10:00","11:30","13:00","15:00","16:30","18:00"];
    const STORAGE_ALL = "demo_bookings_all";
    const STORAGE_MINE = "demo_bookings_mine";

    /* ===== –£–¢–ò–õ–Ü–¢–ò ===== */
    const $ = s => document.querySelector(s);
    function toast(t){ const el=$("#toast"); el.textContent=t; el.classList.add("show"); setTimeout(()=>el.classList.remove("show"),2000); }
    function readAll(){ try{return JSON.parse(localStorage.getItem(STORAGE_ALL)||"[]")}catch{ return [] } }
    function writeAll(a){ localStorage.setItem(STORAGE_ALL, JSON.stringify(a)); }
    function readMine(){ try{return JSON.parse(localStorage.getItem(STORAGE_MINE)||"[]")}catch{ return [] } }
    function writeMine(a){ localStorage.setItem(STORAGE_MINE, JSON.stringify(a)); }
    function todayISO(){ return new Date().toISOString().slice(0,10); }
    function fmtUAH(n){ return `${n} –≥—Ä–Ω`; }

    /* ===== –ü–†–ï–õ–û–ê–î–ï–† ===== */
    window.addEventListener("load", ()=> setTimeout(()=> $("#loader").classList.add("hide"), 350));

    /* ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –§–û–†–ú–´ ===== */
    const serviceSel=$("#service"), serviceInfo=$("#serviceInfo"),
          masterSel=$("#master"), dateInp=$("#date"), timeSel=$("#time"),
          phoneInp=$("#phone"), nameInp=$("#name"), summary=$("#summary");

    // —É—Å–ª—É–≥–∏
    SERVICES.forEach(s=>{
      const o=document.createElement("option");
      o.value=s.id; o.textContent = `${s.name} ‚Äî ${fmtUAH(s.price)}`;
      serviceSel.appendChild(o);
    });

    function updateServiceInfo(){
      const s = SERVICES.find(x=>x.id===serviceSel.value);
      serviceInfo.textContent = s ? `–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å: ${s.duration_min} —Ö–≤ ‚Ä¢ –¶—ñ–Ω–∞: ${fmtUAH(s.price)}` : "";
    }
    serviceSel.addEventListener("change", updateServiceInfo);
    updateServiceInfo();

    // –¥–∞—Ç–∞/—á–∞—Å
    dateInp.value = todayISO();
    function generateSlots(dateISO){
      const busy = new Set(readAll().filter(b=>b.date===dateISO).map(b=>`${b.time}-${b.master}`));
      timeSel.innerHTML="";
      TIME_SLOTS.forEach(t=>{
        const key = `${t}-${masterSel.value}`;
        const opt=document.createElement("option");
        opt.value=t; opt.textContent=t;
        if(busy.has(key)){ opt.disabled=true; opt.textContent=`${t} ‚Äî –∑–∞–π–Ω—è—Ç–æ`; }
        timeSel.appendChild(opt);
      });
      // –≤—ã–±—Ä–∞—Ç—å –ø–µ—Ä–≤—ã–π —Å–≤–æ–±–æ–¥–Ω—ã–π
      const free=[...timeSel.options].find(o=>!o.disabled);
      if(free) timeSel.value=free.value;
    }
    generateSlots(dateInp.value);
    masterSel.addEventListener("change", ()=>generateSlots(dateInp.value));
    dateInp.addEventListener("change", ()=>generateSlots(dateInp.value));

    // –ú–∞—Å–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞: –ø—Ä–∏–≤–æ–¥–∏–º –∫ E.164 (+ –∏ —Ü–∏—Ñ—Ä—ã), –µ–¥–∏–Ω—ã–π –≤–∏–¥ –Ω–∞ –≤—Å–µ—Ö
    phoneInp.addEventListener("input", ()=>{
      let v = phoneInp.value.replace(/[^\d+]/g,"");      // –æ—Å—Ç–∞–≤–ª—è–µ–º + –∏ —Ü–∏—Ñ—Ä—ã
      if(v[0] !== "+") v = "+" + v.replace(/\+/g,"");    // –≤—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–µ–º —Å +
      v = "+" + v.slice(1).replace(/\D/g,"");            // –∑–∞—Ç–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã
      phoneInp.value = v;
    });

    function validPhone(v){
      // + –∏ 10‚Äì15 —Ü–∏—Ñ—Ä
      return /^\+\d{10,15}$/.test(v);
    }

    // submit
    $("#bookForm").addEventListener("submit",(e)=>{
      e.preventDefault();
      const name = nameInp.value.trim();
      const phone= phoneInp.value.trim();
      if(!validPhone(phone)){ toast("–ù–µ–≤—ñ—Ä–Ω–∏–π –Ω–æ–º–µ—Ä: –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç +XXXXXXXXXX"); phoneInp.focus(); return; }

      const srv = SERVICES.find(s=>s.id===serviceSel.value);
      const master = masterSel.value;
      const date = dateInp.value;
      const time = timeSel.value;

      const rec = {
        id: Date.now().toString(36),
        name, phone,
        service_id: srv.id, service_name: srv.name, price: srv.price,
        master, master_name: MASTERS[master],
        date, time, created_at: new Date().toISOString()
      };

      const all = readAll(); all.push(rec); writeAll(all);
      const mine= readMine(); mine.push(rec); writeMine(mine);

      summary.textContent = `‚úÖ –ó–∞–ø–∏—Å –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ: ${srv.name} –∑ ${MASTERS[master]} ‚Ä¢ ${date} ${time} ‚Ä¢ ${srv.price} –≥—Ä–Ω`;
      toast("–ó–∞–ø–∏—Å –∑–±–µ—Ä–µ–∂–µ–Ω–æ üéâ");
      generateSlots(date);
      e.target.reset();
      serviceSel.value=srv.id; updateServiceInfo();
      dateInp.value=date; generateSlots(date);
    });
  </script>
</body>
</html>

